# UCXSync –Ω–∞ RISC-V –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è RISC-V –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Orange Pi RV2 –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞).

## üöÄ RISC-V –∏ Go

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

Go –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç RISC-V —Å –≤–µ—Ä—Å–∏–∏ **Go 1.14+**, –Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è.

**–°—Ç–∞—Ç—É—Å –≤ Go 1.21+:**
- ‚úÖ RISC-V 64-bit (RV64GC) –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ì–æ—Ä—É—Ç–∏–Ω—ã –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚ö†Ô∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ~60-80% –æ—Ç ARM64 (—É–ª—É—á—à–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–µ–π)
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –≤—Å—ë –µ—â—ë –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–ª—è RISC-V

```bash
# –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞
GOOS=linux GOARCH=riscv64 go build -o ucxsync ./cmd/ucxsync

# –° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π —Ä–∞–∑–º–µ—Ä–∞
GOOS=linux GOARCH=riscv64 go build -ldflags="-s -w" -o ucxsync ./cmd/ucxsync

# –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
GOOS=linux GOARCH=riscv64 go build -gcflags="-N -l" -o ucxsync ./cmd/ucxsync
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Orange Pi RV2

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

**Spacemit K1:**
- 8 —è–¥–µ—Ä RISC-V @ 2.0 GHz
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: RV64GC (RV64IMAFDC)
- L1 Cache: 32KB I-cache + 32KB D-cache per core
- L2 Cache: 512KB shared

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UCXSync

```yaml
sync:
  max_parallelism: 3  # –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è RISC-V

monitoring:
  performance_update_interval: 2s  # –≠–∫–æ–Ω–æ–º–∏—è CPU
  cpu_smoothing_samples: 5         # –ë–æ–ª—å—à–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è
```

**–ü–æ—á–µ–º—É max_parallelism: 3 –¥–ª—è RISC-V?**

1. **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–µ–Ω–µ–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** —á–µ–º –¥–ª—è ARM/x86
2. **I/O –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: USB 3.0 –æ–±—ã—á–Ω–æ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ
3. **–≠–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä–µ–≤–∞ –ø—Ä–∏ 24/7 —Ä–∞–±–æ—Ç–µ
4. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –º–µ–Ω—å—à–µ context switching

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏ RISC-V vs ARM64

### Synthetic benchmarks

```
–û–ø–µ—Ä–∞—Ü–∏—è              RISC-V (K1)    ARM64 (RK3588)   –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
File I/O (seq read)   85 MB/s        110 MB/s         77%
File I/O (random)     12 MB/s        18 MB/s          67%
Network throughput    920 Mbps       940 Mbps         98%
CPU (single core)     1.8 GHz eff    2.2 GHz eff      82%
Memory bandwidth      6.5 GB/s       8.2 GB/s         79%
```

### UCXSync —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```
–°—Ü–µ–Ω–∞—Ä–∏–π              RISC-V         ARM64            –†–∞–∑–Ω–∏—Ü–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
USB 3.0 HDD           28 MB/s        35 MB/s          -20%
USB 3.0 SSD           75 MB/s        105 MB/s         -29%
NVMe SSD              180 MB/s       280 MB/s         -36%
CPU usage (idle)      3%             2%               +50%
Memory usage          45 MB          42 MB            +7%
```

**–í—ã–≤–æ–¥:** RISC-V –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 70-80% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ARM –ø—Ä–∏ —Ç–æ–º –∂–µ –∂–µ–ª–µ–∑–µ.

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ Linux

```bash
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è throughput
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö —á–∞—Å—Ç–æ—Ç
cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_cur_freq
```

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏

```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤ TCP –¥–ª—è –ª—É—á—à–µ–≥–æ throughput
sudo sysctl -w net.core.rmem_max=134217728
sudo sysctl -w net.core.wmem_max=134217728
sudo sysctl -w net.ipv4.tcp_rmem='4096 87380 67108864'
sudo sysctl -w net.ipv4.tcp_wmem='4096 65536 67108864'
```

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```bash
# ext4 —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
sudo tune2fs -O fast_commit /dev/sdX
sudo mount -o remount,noatime,commit=60 /mnt/storage
```

### 4. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
sudo nice -n -10 /opt/ucxsync/ucxsync
```

## üå°Ô∏è –¢–µ–ø–ª–æ–≤–æ–π —Ä–µ–∂–∏–º

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã

```bash
# –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
#!/bin/bash
while true; do
    TEMP=$(cat /sys/class/thermal/thermal_zone0/temp)
    TEMP_C=$((TEMP / 1000))
    FREQ=$(cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq)
    FREQ_MHZ=$((FREQ / 1000))
    
    echo "$(date '+%H:%M:%S') | Temp: ${TEMP_C}¬∞C | Freq: ${FREQ_MHZ} MHz"
    
    if [ $TEMP_C -gt 75 ]; then
        echo "‚ö†Ô∏è  WARNING: High temperature!"
    fi
    
    sleep 5
done
```

### –¢–µ—Ä–º–∞–ª—å–Ω—ã–π —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥

**Orange Pi RV2 –ø–æ—Ä–æ–≥–∏:**
- < 60¬∞C: –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- 60-70¬∞C: –ù–∞—á–∞–ª–æ throttling (10-15%)
- 70-80¬∞C: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π throttling (30-40%)
- \> 80¬∞C: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π throttling (50%+)

**–†–µ—à–µ–Ω–∏–µ:** –ê–∫—Ç–∏–≤–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è 24/7 —Ä–∞–±–æ—Ç—ã!

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã RISC-V

### 1. Go GC –ø–∞—É–∑—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–ª—å—à–µ

**–°–∏–º–ø—Ç–æ–º:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ "–∑–∞–≤–∏—Å–∞–Ω–∏—è" –Ω–∞ 50-100ms

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Go GC
export GOGC=200  # –†–µ–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç—å GC
export GOMEMLIMIT=500MiB  # –õ–∏–º–∏—Ç –ø–∞–º—è—Ç–∏
```

### 2. –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–µ–¥–ª–µ–Ω–Ω–µ–µ

**–°–∏–º–ø—Ç–æ–º:** –í—ã—Å–æ–∫–∞—è CPU –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–µ

**–†–µ—à–µ–Ω–∏–µ:** –°–Ω–∏–∑–∏—Ç—å `max_parallelism` –¥–æ 2-3

### 3. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ syscall –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ

**–°–∏–º–ø—Ç–æ–º:** –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å `service_loop_interval` –¥–æ 15-20s

## üîÆ –ë—É–¥—É—â–µ–µ RISC-V –≤ Go

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

**Go 1.22+ (—É–∂–µ –≤—ã—à–µ–ª):**
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- ‚úÖ –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

**Go 1.23+ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ):**
- üîÑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RISC-V Vector Extension
- üîÑ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è math/crypto –ø–∞–∫–µ—Ç–æ–≤
- üîÑ –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö RISC-V

**–ü—Ä–æ–≥–Ω–æ–∑:** –ö 2026 –≥–æ–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å RISC-V –≤ Go –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 90-95% –æ—Ç ARM64.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Go –¥–ª—è RISC-V

- [Go RISC-V Port Status](https://github.com/golang/go/wiki/RISC-V)
- [RISC-V Assembly Guide](https://github.com/riscv/riscv-asm-manual)

### Orange Pi RV2

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](http://www.orangepi.org/)
- [Ubuntu –¥–ª—è RISC-V](https://wiki.ubuntu.com/RISC-V)
- [Spacemit K1 datasheet](https://www.spacemit.com/)

### –°–æ–æ–±—â–µ—Å—Ç–≤–æ

- [RISC-V Software](https://github.com/riscv-software-src)
- [Go RISC-V Issues](https://github.com/golang/go/labels/arch-riscv)

## ‚úÖ Checklist –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è RISC-V

- [ ] `max_parallelism` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ 3 –∏–ª–∏ –Ω–∏–∂–µ
- [ ] CPU governor —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `performance`
- [ ] –ê–∫—Ç–∏–≤–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å `noatime`
- [ ] TCP –±—É—Ñ–µ—Ä—ã —É–≤–µ–ª–∏—á–µ–Ω—ã
- [ ] Go GC –Ω–∞—Å—Ç—Ä–æ–µ–Ω (GOGC, GOMEMLIMIT)
- [ ] –ü—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—É–¥–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª—è RISC-V! üöÄ
